<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suporte N2 FlavioItech</title>
    <meta name="theme-color" content="#0B021D"/>
    <meta name="description" content="Aplicativo de acompanhamento de metas para Suporte N2."/>
    <link rel="apple-touch-icon" href="icon-192x192.png">
    <link rel="manifest" href="manifest.json">

    <!-- LIBS -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js"></script>
    
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="toast-container"></div>

    <div class="page-container">
        <header class="header-metas">
            <img src="logo.jpg" alt="Logo" class="header-logo">
            <h1 id="main-title" data-editable="true">Suporte N2</h1>
            <button id="settings-button" class="icon-button" title="Configurações e Ações">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                </svg>
            </button>
        </header>
        
        <div class="tabs-container">
            <button class="tab-button active" data-tab="principal">Principal</button>
            <button class="tab-button" data-tab="cancelamentos">Cancelamentos</button>
            <button class="tab-button" data-tab="relatorios">Relatórios</button>
            <button class="tab-button" data-tab="outros">Outros</button>
        </div>
        
        <main id="tab-content-wrapper">
            <!-- ABA PRINCIPAL -->
            <section id="tab-principal" class="tab-content active">
                <div class="metas-grid">
                    
                    <div class="meta-card">
                        <div class="card-header">
                            <h2 id="title-casos" data-editable="true">Histórico de Casos</h2>
                            <p id="subtitle-casos" data-editable="true">Pesquise e gerencie os seus casos.</p>
                        </div>
                        <div class="card-body">
                            <div class="case-controls">
                                <input type="search" id="case-search-input" placeholder="Pesquisar...">
                                <div class="filter-buttons-group">
                                    <button class="button filter-btn active" data-filter="Todos">Todos</button>
                                    <button class="button filter-btn" data-filter="Pendente">Pendentes</button>
                                    <button class="button filter-btn" data-filter="Resolvido">Resolvidos</button>
                                </div>
                            </div>
                            <div id="cases-list-container"></div>
                        </div>
                        <div class="card-footer">
                            <button id="addCaseButton" class="button secondary-button">+ Adicionar</button>
                            <button id="clearCasesButton" class="button reset-button">Limpar Casos</button>
                        </div>
                    </div>

                    <div class="meta-card">
                        <div class="card-header">
                            <h2 data-editable="true">Resumo do Dia</h2>
                            <p data-editable="true">Suas anotações e casos de hoje.</p>
                        </div>
                        <div class="card-body">
                            <h4>Anotações de Bordo:</h4>
                            <textarea id="daily-summary-textarea" placeholder="Anote aqui os eventos importantes do dia..."></textarea>
                            <h4 style="margin-top: 15px;">Casos do Dia:</h4>
                            <div id="daily-summary-cases-list"></div>
                        </div>
                        <div class="card-footer">
                             <button id="dailySummaryClearButton" class="button reset-button">Limpar Anotação</button>
                            <button id="dailySummarySaveButton" class="button save-button">Salvar Resumo</button>
                        </div>
                    </div>

                    <div class="meta-card">
                        <div class="card-header">
                            <h2 id="title-respostas" data-editable="true">Respostas Rápidas</h2>
                            <p id="subtitle-respostas" data-editable="true">Clique para copiar o texto completo.</p>
                        </div>
                        <div class="card-body" id="respostas-container">
                            <!-- As respostas serão carregadas pelo JS -->
                        </div>
                    </div>

                    <div class="meta-card">
                        <div class="card-header">
                            <h2 id="title-daily-mission" data-editable="true">Missão Diária</h2>
                            <p id="subtitle-daily-mission" data-editable="true">Seus objetivos para hoje.</p>
                        </div>
                        <div class="card-body">
                            <ul id="daily-mission-list"></ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ABA CANCELAMENTOS -->
            <section id="tab-cancelamentos" class="tab-content">
                <div class="metas-grid">
                    <div class="meta-card">
                        <div class="card-header">
                            <h2 id="title-atendimentos" data-editable="true">Contadores Mensais</h2>
                            <p id="subtitle-atendimentos" data-editable="true">Acompanhe seu progresso para a comissão.</p>
                        </div>
                        <div class="card-body">
                             <div class="form-group">
                                <label for="categorySelectTop">Categoria do Cancelamento Atual:</label>
                                <select id="categorySelectTop">
                                     <!-- Opções carregadas pelo JS -->
                                </select>
                            </div>
                            <div class="daily-counters-row">
                                <div class="form-group">
                                    <label for="protocolosAnalisadosInput">Protocolos (Dia):</label>
                                    <input type="number" id="protocolosAnalisadosInput" value="0">
                                </div>
                                <div class="form-group">
                                    <label for="dailyCancellationsInput">Cancelamentos (Dia):</label>
                                    <input type="number" id="dailyCancellationsInput" value="0">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="atendimentosInput">Total de Cancelamentos (Mês):</label>
                                <input type="number" id="atendimentosInput" value="0">
                            </div>
                            <div id="metas-container"></div>
                        </div>
                    </div>
                    <div class="meta-card">
                        <div class="card-header"><h2 id="title-projecao" data-editable="true">Projeção de Cancelamentos</h2></div>
                        <div class="card-body">
                            <div class="projection-value" id="projection-value">0</div>
                            <div id="projection-formula">Aguardando histórico...</div>
                            <div class="tier-container" id="tier-projection-container" style="margin-top: 15px;"></div>
                        </div>
                    </div>
                    <div class="meta-card">
                        <div class="card-header"><h2 data-editable="true">Gráfico de Tendência</h2></div>
                        <div class="card-body">
                            <div id="chart-container"><canvas id="trendChart"></canvas></div>
                        </div>
                    </div>
                     <div class="meta-card">
                        <div class="card-header"><h2 data-editable="true">Resumo por Categoria</h2></div>
                        <div class="card-body">
                            <div id="category-chart-container"><canvas id="categoryPieChart"></canvas></div>
                        </div>
                    </div>
                    <div class="meta-card">
                        <div class="card-header"><h2 data-editable="true">Histórico de Entradas</h2></div>
                        <div class="card-body">
                            <ul id="history-list"></ul>
                        </div>
                    </div>
                </div>
            </section>

             <!-- ABA RELATÓRIOS -->
            <section id="tab-relatorios" class="tab-content">
                <div class="metas-grid">
                    <div class="meta-card">
                        <div class="card-header">
                            <h2>Geração de Relatório</h2>
                            <p>Selecione o mês para gerar o relatório detalhado.</p>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <label for="report-month">Mês e Ano:</label>
                                <input type="month" id="report-month" />
                            </div>
                             <div class="card-footer" style="justify-content: center;">
                                <button id="generateReportBtn" class="button">Gerar Análise</button>
                                <button id="compareMonthsBtn" class="button secondary-button">Comparar</button>
                                <button id="exportPdfBtn" class="button save-button">Exportar PDF</button>
                            </div>
                            <div id="report-output"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ABA OUTROS -->
            <section id="tab-outros" class="tab-content">
                <div class="metas-grid">
                    <div class="meta-card">
                         <div class="card-header">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <h2 id="title-links" data-editable="true">Links Úteis</h2>
                                <button id="senhas-button" title="Ver Senhas" class="icon-button">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/></svg>
                                </button>
                            </div>
                            <p id="subtitle-links" data-editable="true">Acesse sistemas importantes com um clique.</p>
                        </div>
                        <div class="card-body" id="links-uteis-container">
                            <!-- Links carregados pelo JS -->
                        </div>
                    </div>
                     <div class="meta-card">
                        <div class="card-header"><h2 id="title-comissao" data-editable="true">Comissão Estimada</h2></div>
                        <div class="card-body" style="justify-content: center; align-items: center;">
                            <div id="bonus-value" class="bonus-value">R$ 0,00</div>
                            <div id="bonus-formula">Aguardando dados...</div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <div class="action-buttons">
            <button id="saveButton" class="button save-button">Salvar Progresso</button>
            <button id="editButton" class="button secondary-button">✏️ Editar Textos</button>
            <button id="themeToggleButton" class="button">Mudar Tema</button>
            <button id="notifyButton" class="button">🔔 Ativar Notificações</button>
        </div>
    </div>

    <footer class="app-footer">
        <a href="https://www.flavioitech.com" target="_blank" class="footer-link">
            <img src="logo.jpg" alt="Logo" class="footer-logo">
            <span data-editable="true">Meu Site</span>
        </a>
        <a href="https://wa.me/5519998821845" target="_blank" class="footer-link">
            <span data-editable="true">19 99882-1845</span>
        </a>
    </footer>

    <!-- MODAIS -->
    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 data-editable="true">Configurações e Ações</h2>
                <span class="close-button">&times;</span>
            </div>
            <div class="modal-body">
                <!-- Conteúdo do modal de configurações carregado pelo JS -->
            </div>
        </div>
    </div>

    <div id="senhas-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 data-editable="true">Gerenciador de Senhas</h2>
                <span class="close-button">&times;</span>
            </div>
            <div class="modal-body">
                <!-- Conteúdo do modal de senhas carregado pelo JS -->
            </div>
        </div>
    </div>

    <script type="module" src="script.js"></script>
</body>
</html>

